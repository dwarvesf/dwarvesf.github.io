<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content><meta name=description property="og:description" content><meta name=keywords content><meta property="og:type" content="website"><meta property="og:url" content="https://note.d.foundation/playbook/engineering/code-review/"><meta property="og:image" content="https://note.d.foundation/img/LOGO.png"><link rel=icon type=image/x-icon href=https://note.d.foundation/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://note.d.foundation/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://note.d.foundation/favicon-32x32.png><link rel=apple-touch-icon href=https://note.d.foundation/apple-touch-icon.png><title>| Dwarves Foundation</title><meta name=description content><link rel=canonical href=https://note.d.foundation/playbook/engineering/code-review/><link rel="shortcut icon" type=image/png href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII="><script defer data-domain=note.d.foundation src=https://plausible.io/js/script.js></script><style>:root{--primary-color:#e13F5e;--primary-font-color:#ddd;--primary-font-color-light:#333;--main-padding:4.5%;--column-gap:20px;--nav-sidebar-width:200px;--nav-sidebar-offset:0px}body{font-family:ibm plex sans,sans-serif;font-size:16px;color:#000;text-rendering:optimizeLegibility;padding:2rem;max-width:100%;margin:0;padding:0;background-color:#fff;line-height:1.5;min-height:100vh;display:flex;flex-direction:column;overflow-wrap:break-word;hyphens:auto}h1,h2,h3,h4{color:var(--primary-font-color)}h1{font-size:45px}h2{font-size:30px}h3{font-size:22px}h4{font-size:15px}q{font-size:20px;max-width:500px;display:block;margin-left:30px}pre{font-family:monospace;background:#000;color:#dadada;padding:15px;border-radius:2px;overflow-x:scroll;width:100%;box-sizing:border-box}pre>code{display:block;text-indent:0;white-space:inherit;font-weight:400}code{font-family:monospace;font-size:12px;background:#000;color:#dadada;padding:2px 5px;white-space:wrap;border-radius:2px;font-weight:700;display:inline-block;line-height:16px;overflow-x:scroll;margin-bottom:-4px}code comment{color:#777}code.button{background:#fff;color:#000;font-size:smaller;display:inline-block;padding:0 6px;font-weight:700;border-radius:2px;line-height:22px}a[href*="#"]{text-decoration:none}.note-title{display:inline-grid;width:100%;max-width:600px;grid-template-areas:"pagetitle pagetitle" "date tags" "authors authors";grid-template-rows:repeat(auto-fill,minmax(0,1fr));grid-template-columns:repeat(2,1fr)}.note-title .pagetitle{grid-area:pagetitle}.note-title .date{grid-area:date;color:#636466}.note-title .tags{grid-area:tags;justify-self:right}.note-title .authors{grid-area:authors}.grid{display:inline-grid;grid-template-areas:"title title title" "subtitle subtitle subtitle" "tabmenu tabmenu tabmenu" "nav content pagenav" "nav content pagenav";grid-template-rows:repeat(auto-fill,minmax(0,1fr));grid-template-columns:1fr 2fr 1fr;padding-bottom:48px}.grid>*{padding:16px 4.5%}.grid>h1{margin:0}.grid .title{grid-area:title;color:var(--primary-color)}.grid .subtitle{grid-area:subtitle;font-size:18px;padding-top:16px}.active{color:var(--primary-color);line-height:1.3;border-bottom:2px solid var(--primary-color)}nav.tab-menu{grid-area:tabmenu;border-bottom:1px solid #e7e7e7;padding-bottom:0}nav.tab-menu ul{list-style-type:none;padding:0;margin-bottom:0;display:inline-grid;width:100%;grid-template-rows:1fr;grid-template-columns:repeat(auto-fill,minmax(6rem,1fr));row-gap:16px}nav.tab-menu ul li{font-size:16px;font-weight:500;display:inline-block;margin-right:48px;padding:0 0 16px;width:min-content}nav.tab-menu ul li a{text-decoration:none;color:inherit}nav.menu{padding:24px 48px;line-height:22px;margin-top:-2px;white-space:nowrap;grid-area:nav}details{margin-left:-7px;overflow:hidden;font-size:14px;font-weight:500}summary{display:block;padding:5px 5px 12px 24px;position:relative;cursor:pointer;font-size:18px}summary:before{content:'';border-width:.4rem;border-style:solid;border-color:transparent transparent transparent #000;position:absolute;top:10px;left:10px;transform:rotate(0);transform-origin:.2rem 50%;transition:.25s transform ease}details[open]>summary:before{transform:rotate(90deg)}details summary::-webkit-details-marker{display:none}details>ul{margin-bottom:0}hr{margin-left:0;width:100%;max-width:inherit}nav .site-nav{display:block}nav .site-nav section{margin-top:-2px}nav .site-nav section h2{margin:20px 0;font-size:24px;text-transform:lowercase}nav.menu ul{display:inline-grid;grid-template-rows:repeat(auto-fill,minmax(0,1fr));grid-template-columns:repeat(auto-fill,minmax(var(--nav-sidebar-width),1fr));padding:0 10px 10px 0;margin:0;list-style-type:none;line-height:22px}main{grid-area:content;display:inline-block;padding:var(--main-padding);width:700px;box-sizing:border-box;justify-self:center}main>ul{line-height:25px;margin:0}main>ul>li>a{text-decoration:underline}.dual-list>ul{columns:2}.single-list>ul{columns:2}.profile img{width:100px;height:100px;object-fit:cover;aspect-ratio:1/1}.profile object{width:100px;height:100px;object-fit:cover;aspect-ratio:1/1}table,th,td{border:1px solid;border-collapse:collapse;border-spacing:0}tr{max-height:100px;max-width:100px}td{padding:0 20px;max-width:300px;max-height:100px;overflow:hidden;text-overflow:ellipsis}td:has(img){padding:0;line-height:0}#TableOfContents>ul>li>a{text-decoration:underline}#TableOfContents>ul{display:grid;column-gap:var(--column-gap);box-sizing:border-box;grid-template-columns:repeat(auto-fill,minmax(0,calc(50% - var(--column-gap))));line-height:20px}#TableOfContents li{white-space:nowrap;list-style-type:decimal-leading-zero;list-style-position:inside;overflow:hidden;text-overflow:ellipsis}.notice{padding:20px;border:2px solid #000}main>blockquote{padding:20px;border:2px solid #000}main>*{max-width:inherit;margin-bottom:30px}header{padding:var(--main-padding);border-bottom:1px solid #363636}header h1{display:inline}footer{margin-top:auto;padding:var(--main-padding);clear:both}nav .site-nav ul li{list-style-type:none;display:flex;font-variant-numeric:tabular-nums;font-size:14px;padding-left:20px}li:has(input[type=checkbox]){display:block;list-style-type:none}ul:has(li input[type=checkbox]){padding:0}ul li a{overflow:hidden;text-overflow:ellipsis;background-color:#fff}ul li a:hover{white-space:nowrap;width:100%;z-index:10}ul li p{margin-block-end:0;margin-block-start:0}time{padding-right:1rem}blockquote{margin:1em 0;padding:0 2em;border-left:3px solid #eee}img{max-width:100%}video{max-width:100%}a,a:visited{color:#000}@media(prefers-color-scheme:dark){summary:before{border-color:transparent transparent transparent #fff}nav.tab-menu{border-bottom:1px solid #3d3d3d}a,a:visited{color:#dadada}body{background:#1e1e1e;color:#dadada}body a{color:#dadada}pre{background:#fff;color:#1e1e1e}code{background:#fff;color:#1e1e1e}body select{color:#000;background-color:#fff}.project{border-left:2px solid #fff}.notice{border-color:#fff}.mono{filter:invert(1)}.progress>div{background-color:#fff}.progress>div>span{color:#000}main>blockquote{border-color:#fff}ul li a{background-color:inherit}section>ul li a{background-color:inherit}}@media(prefers-color-scheme:light){h1,h2,h3,h4{color:var(--primary-font-color-light)}}@media only screen and (max-width:700px){main{width:100%}}@media only screen and (max-width:1100px){.grid{display:inline-grid;grid-template-areas:"title" "subtitle" "tabmenu" "content" "pagenav" "nav";grid-template-rows:repeat(auto-fill,minmax(0,1fr));grid-template-columns:1fr}.note-title{display:inline-grid;width:100%;grid-template-areas:"pagetitle" "date" "tags" "authors";grid-template-rows:repeat(auto-fill,minmax(0,1fr));grid-template-columns:1fr}.note-title .tags{justify-self:left}nav.menu ul{width:100%}nav.menu li{padding:8px}nav .site-nav section{margin:0 10px 10px 0}nav.menu{max-width:100%;box-sizing:border-box;display:inline-block}}</style><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"playbook","name":"","headline":"","alternativeHeadline":"","description":"Code Review How we do code review at Dwarves Foundation.\nEvery project member must have another team member or team leader to review his\/her code, and every changes to the code must be achieved via a Pull request to the main development branch. On larger project (10 developers\u002b) we may requires 2 reviewers. All of this is to ensure correctness, quality of the code and learning opportunities for both assignee (who develop) and reviewer.","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/note.d.foundation\/playbook\/engineering\/code-review\/"},"author":{"@type":"Person","name":"Han Ngo"},"creator":{"@type":"Person","name":"Han Ngo"},"accountablePerson":{"@type":"Person","name":"Han Ngo"},"copyrightHolder":"Dwarves Foundation","copyrightYear":"0001","date":"0001-01-01T00:00:00.00Z","dateCreated":"0001-01-01T00:00:00.00Z","datePublished":"0001-01-01T00:00:00.00Z","dateModified":"0001-01-01T00:00:00.00Z","publisher":{"@type":"Organization","name":"Dwarves Foundation","url":"https://note.d.foundation/","logo":{"@type":"ImageObject","url":"https:\/\/note.d.foundation\/","width":"32","height":"32"}},"image":"https://note.d.foundation/","url":"https:\/\/note.d.foundation\/playbook\/engineering\/code-review\/","wordCount":"1084","genre":[],"keywords":[]}</script><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><script type=text/javascript>window.addEventListener("DOMContentLoaded",function(){document.body.style.visibility="visible",document.body.style.opacity=1})</script></head><body class=playbook><div class=grid><h1 class=title><a style=color:inherit;text-decoration:none href=/site-index>Dwarves Notes</a></h1><div class=subtitle>A collection of notes for everything we do and operate at Dwarves.</div><nav class=tab-menu><ul><li><a href=/>Home</a></li><li><a href=/earn>Earn</a></li><li><a href=/memo>Memo</a></li><li><a href=/radar>Radar</a></li><li><a href=/hiring>Hiring</a></li><li><a href=/newsletter>Newsletter</a></li></ul></details></nav><nav class=menu><section class=site-nav></section></nav><main><div class=note-title><h1 class=pagetitle></h1><div class=date>Jan 1, 0001</div><div class=tags>Tags:</div></div><hr><h1 id=code-review><a href=#code-review>Code Review <a href=#code-review></a></a></h1><p>How we do code review at Dwarves Foundation.</p><p>Every project member must have another team member or team leader to review his/her code, and every changes to the code must be achieved via a Pull request to the main development branch. On larger project (10 developers+) we may requires 2 reviewers. All of this is to ensure correctness, quality of the code and learning opportunities for both assignee (who develop) and reviewer.</p><p>We review everything on the Pull request - code, tests, documents, config files, .etc.</p><h2 id=code-review-flow><a href=#code-review-flow>Code Review Flow <a href=#code-review-flow></a></a></h2><ul><li>Feature/bug assignee finished coding on a new branch based off <code>develop</code> branch</li><li>Assignee self-review the code he/her wrote one last time before assigning it to reviewer</li><li>Assignee open a Pull request on project repository and assign the PR to a reviewer, removes any [WIP] prefix in PR title to let reviewer knows this PR is ready for review</li><li>Assignee write down brief information about this PR (we have a PR template for this)</li><li>Reviewer read and review PR&rsquo;s information, make sure to understand why do we have this PR</li><li>Reviewer review/refactor the code with assignee</li><li><strong>Reviewer signs off</strong> on the pull request with a 👍 or “Ready to merge” comment</li><li><strong>Developer</strong> merges PR and clean up remote branch</li></ul><h2 id=principles><a href=#principles>Principles <a href=#principles></a></a></h2><ul><li>Technical facts and data overrule opinions and personal preferences.</li><li>On matters of style, the style guide is the absolute authority. Any purely style point (whitespace, etc.) that is not in the style guide is a matter of personal preference. The style should be consistent with what is there. If there is no previous style, accept the author’s.</li><li>Aspects of software design are almost never a pure style issue or just a personal preference. They are based on underlying principles and should be weighed on those principles, not simply by personal opinion. Sometimes there are a few valid options. If the author can demonstrate (either through data or based on solid engineering principles) that several approaches are equally valid, then the reviewer should accept the preference of the author. Otherwise the choice is dictated by standard principles of software design.</li><li>If no other rule applies, then the reviewer may ask the author to be consistent with what is in the current codebase, as long as that doesn’t worsen the overall code health of the system.</li></ul><h2 id=code-review-standard><a href=#code-review-standard>Code Review Standard <a href=#code-review-standard></a></a></h2><p>At minimal:</p><ul><li>The code must work and tests must pass</li><li>No typos</li><li>No debugging code .ie <code>console.log</code>/<code>fmt.Print</code>/.etc unless you have a good reason for it</li><li>Never commit environment files to source control (.ie <code>.env</code> files for example), unless you have a good reason for it</li></ul><h3 id=about-testing><a href=#about-testing>About testing <a href=#about-testing></a></a></h3><p>We don&rsquo;t follow TDD, we don&rsquo;t need to have tests for everything but we must have test to cover critical parts of the application. Test cases ensure that our app is working and without bugs whenever we introduce new features into it. Test cases also gives us the affordance to refactor and improve our code quality. With refactoring, we learn better coding practices and improve ourselves as a coder.</p><h3 id=naming-convention><a href=#naming-convention>Naming convention <a href=#naming-convention></a></a></h3><p>This topic varies depends what programming language we use as each language have their own best practices, but a general rule is to make it clear about our intention - ie. if you have no idea what a particular variable is for while reviewing a helper function, then that variable needs more comments or a new name to better reflects it&rsquo;s intention.</p><h2 id=reviewer-guides><a href=#reviewer-guides>Reviewer Guides <a href=#reviewer-guides></a></a></h2><ul><li>Review the code, don&rsquo;t review the coder</li><li>Check for correctness of code, not how you would do it</li><li>Discuss possibilities & trade-offs, not what&rsquo;s right & what&rsquo;s wrong</li><li>Try not to go into lengthy discussion and keep code review to less than 30 minutes</li></ul><h3 id=mentoring><a href=#mentoring>Mentoring <a href=#mentoring></a></a></h3><p>Code review can have an important function of teaching developers something new about a language, a framework, or general software design principles. It’s always fine to leave comments that help a developer learn something new. Sharing knowledge is part of improving the code health of a system over time. Just keep in mind that if your comment is purely educational, but not critical to meeting the standards described in this document, prefix it with <strong>“Nit: “</strong></p><p>Reviewers should always feel free to leave comments expressing that something could be better, but if it’s not very important, prefix it with something like <strong>“Nit: “</strong> to let the author know that it’s just a point of polish that they could choose to ignore</p><h3 id=comments--feedbacks><a href=#comments--feedbacks>Comments & Feedbacks <a href=#comments--feedbacks></a></a></h3><h4 id=courtesy><a href=#courtesy>Courtesy <a href=#courtesy></a></a></h4><p>In general, it is important to be courteous and respectful while also being very clear and helpful to the developer whose code you are reviewing. <strong>One way to do this is to be sure that you are always making comments about the code and never making comments about the developer</strong>. You don&rsquo;t always have to follow this practice, but you should definitely use it when saying something that might otherwise be upsetting or contentious. For example:</p><p><strong>Bad</strong>: &ldquo;Why did you use threads here when there&rsquo;s obviously no benefit to be gained from concurrency?&rdquo;</p><p><strong>Good</strong>: &ldquo;The concurrency model here is adding complexity to the system without any actual performance benefit that I can see. Because there&rsquo;s no performance benefit, it&rsquo;s best for this code to be single-threaded instead of using multiple threads.&rdquo;</p><h4 id=explain-why><a href=#explain-why>Explain WHY <a href=#explain-why></a></a></h4><p>Explain your reason helps the developer understand why you are making your comment. You don&rsquo;t always need to include this information in your review comments, but sometimes it&rsquo;s appropriate to give a bit more explanation around your intent, the best practice you&rsquo;re following, or how your suggestion improves code health</p><h4 id=giving-guidance><a href=#giving-guidance>Giving Guidance <a href=#giving-guidance></a></a></h4><p>You should strike an appropriate balance between pointing out problems and providing direct guidance. Pointing out problems and letting the developer make a decision often helps the developer learn, and makes it easier to do code reviews. It also can result in a better solution, because the developer is closer to the code than the reviewer is.</p><p>However, sometimes direct instructions, suggestions, or even code are more helpful. The primary goal of code review is to get the best code/solution possible. A secondary goal is improving the skills of developers so that they require less and less review over time</p><h4 id=accepting-explanations><a href=#accepting-explanations>Accepting Explanations <a href=#accepting-explanations></a></a></h4><p>If you ask a developer to explain a piece of code that you don&rsquo;t understand, that should usually result in them rewriting the code more clearly. Explanations written only in the code review tool are not helpful to future code readers</p><p>Encourage developers to simplify code or add code comments instead of just explaining the complexity to you</p><p><img src=/playbook/engineering/./img/code-review-hierarchy.png onerror="this.onerror=null"></p></main></div></body></html>